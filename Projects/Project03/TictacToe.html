<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cute Tic‑Tac‑Toe (Blue Theme)</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f0f7ff;
      --card:#fff;
      --accent:#7ab8ff;
      --accent-dark:#3f8cff;
      --soft:#cfe6ff;
      --muted:#5c6f85;
      --glass: rgba(255,255,255,0.6);
    }
    *{box-sizing:border-box}
    body{font-family:'Poppins',system-ui,Segoe UI,Roboto,-apple-system;display:flex;align-items:center;justify-content:center;min-height:100vh;margin:0;background:linear-gradient(180deg,var(--bg),#fff);}
    .wrap{width:min(720px,95vw);padding:28px;border-radius:22px;background:linear-gradient(180deg,var(--card),#fff);box-shadow:0 8px 30px rgba(100,130,160,0.12);display:grid;grid-template-columns:1fr 260px;gap:18px;align-items:start}
    header{grid-column:1/-1;display:flex;align-items:center;gap:12px}
    .logo{width:64px;height:64px;border-radius:14px;background:linear-gradient(135deg,var(--accent),var(--accent-dark));display:grid;place-items:center;color:white;font-weight:700;font-size:28px;box-shadow:0 6px 18px rgba(90,130,255,0.2)}
    h1{font-size:20px;margin:0;color:#2c3a4d}
    p.lead{margin:0;color:var(--muted);font-size:13px}

    /* Board */
    .board-card{padding:18px;border-radius:16px;background:linear-gradient(180deg,var(--soft),transparent);box-shadow:inset 0 1px 0 rgba(255,255,255,0.6);display:flex;flex-direction:column;gap:12px}
    .board{width:360px;height:360px;max-width:calc(100% - 36px);display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin:auto}
    .cell{background:var(--card);border-radius:14px;display:grid;place-items:center;font-size:40px;cursor:pointer;user-select:none;position:relative;transition:transform .12s ease, box-shadow .12s ease;box-shadow:0 6px 20px rgba(100,120,140,0.08)}
    .cell:active{transform:translateY(2px)}
    .cell.disabled{cursor:not-allowed;opacity:.9}
    .cell .mark{font-weight:700;font-size:44px}

    /* cute marks */
    .x-mark{color:var(--accent-dark);}
    .o-mark{background:linear-gradient(135deg,#bff0ff,#7ad1ff);-webkit-background-clip:text;background-clip:text;color:transparent}

    /* sidebar */
    .sidebar{padding:18px;border-radius:14px;background:linear-gradient(180deg,#ffffff,rgba(255,255,255,0.9));box-shadow:0 8px 30px rgba(100,120,140,0.04);min-height:150px}
    .score{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
    .score .pill{background:var(--glass);padding:8px 12px;border-radius:999px;font-weight:600}
    .status{font-size:13px;color:var(--muted);margin-bottom:10px}
    .controls{display:flex;gap:8px}
    button.btn{border:0;padding:10px 12px;border-radius:10px;cursor:pointer;font-weight:600}
    .btn.reset{background:transparent;border:1px dashed var(--accent);color:var(--accent-dark)}
    .btn.happy{background:linear-gradient(90deg,#d1e6ff,#d9f2ff);color:#24405b}

    .footer-hint{font-size:12px;color:var(--muted);margin-top:10px}

    /* win highlight */
    .cell.win{box-shadow:0 10px 30px rgba(120,180,255,0.25);transform:scale(1.06)}

    /* confetti */
    .confetti{position:fixed;left:0;top:0;right:0;bottom:0;pointer-events:none}

    /* responsive */
    @media (max-width:880px){.wrap{grid-template-columns:1fr;}}
  </style>
</head>
<body>
  <div class="wrap" role="application">
    <header>
      <div class="logo">☁</div>
      <div>
        <h1>Cute Tic‑Tac‑Toe</h1>
        <p class="lead">Play with a friend — sky blue vibes, soft animations, and tiny confetti when someone wins!</p>
      </div>
    </header>

    <section class="board-card" aria-label="tic tac toe board">
      <div id="board" class="board" role="grid" aria-label="Tic Tac Toe cells">
        <!-- cells generated by JS -->
      </div>

      <div style="display:flex;justify-content:center;gap:12px;align-items:center;margin-top:6px">
        <div class="status" id="status">Turn: <strong id="turn">X</strong></div>
        <button class="btn reset" id="undoBtn" title="Undo last move">Undo</button>
        <button class="btn happy" id="resetBtn">Reset</button>
      </div>
    </section>

    <aside class="sidebar">
      <div class="score">
        <div class="pill">X <span id="scoreX">0</span></div>
        <div class="pill">Draw <span id="scoreD">0</span></div>
        <div class="pill">O <span id="scoreO">0</span></div>
      </div>

      <div class="status"><strong id="message">Let’s play — make a move!</strong></div>

      <div class="controls">
        <button class="btn happy" id="swapBtn">Swap Sides</button>
        <button class="btn reset" id="aiBtn">Two‑player</button>
      </div>

      <div class="footer-hint">Tip: click a tile to place your X or O. Use Undo if you change your mind.</div>
    </aside>
  </div>

  <canvas id="confetti" class="confetti" width="800" height="600" aria-hidden="true"></canvas>

  <script>
    // Same JS as before — no changes needed for theme
    const boardEl = document.getElementById('board');
    const turnEl = document.getElementById('turn');
    const messageEl = document.getElementById('message');
    const resetBtn = document.getElementById('resetBtn');
    const undoBtn = document.getElementById('undoBtn');
    const scoreX = document.getElementById('scoreX');
    const scoreO = document.getElementById('scoreO');
    const scoreD = document.getElementById('scoreD');
    let cells = [];
    let board = Array(9).fill(null);
    let current = 'X';
    let gameOver = false;
    let history = [];
    let scores = {X:0,O:0,D:0};

    const winning = [
      [0,1,2],[3,4,5],[6,7,8],
      [0,3,6],[1,4,7],[2,5,8],
      [0,4,8],[2,4,6]
    ];

    function createBoard(){
      boardEl.innerHTML = '';
      for(let i=0;i<9;i++){
        const c = document.createElement('button');
        c.className = 'cell';
        c.setAttribute('role','gridcell');
        c.dataset.index = i;
        c.addEventListener('click',onCellClick);
        boardEl.appendChild(c);
        cells[i]=c;
      }
      resizeCanvas();
    }

    function onCellClick(e){
      const i = +e.currentTarget.dataset.index;
      if(gameOver || board[i]) return;
      makeMove(i);
    }

    function makeMove(i){
      board[i]=current;
      history.push(i);
      renderCell(i);
      const win = checkWin();
      if(win){
        gameOver=true;
        highlightWin(win);
        messageEl.textContent = current + ' wins!';
        scores[current]++;
        updateScores();
        launchConfetti();
        return;
      }
      if(board.every(Boolean)){
        gameOver=true;
        messageEl.textContent = "It's a draw!";
        scores.D++;
        updateScores();
        return;
      }
      current = current === 'X' ? 'O' : 'X';
      turnEl.textContent = current;
      messageEl.textContent = "Good luck — it's " + current + "'s turn";
    }

    function renderCell(i){
      const c = cells[i];
      c.innerHTML = '';
      const mark = document.createElement('div');
      mark.className = 'mark ' + (board[i]==='X' ? 'x-mark':'o-mark');
      mark.textContent = board[i];
      c.appendChild(mark);
      c.classList.add('disabled');
    }

    function checkWin(){
      for(const combo of winning){
        const [a,b,c] = combo;
        if(board[a] && board[a]===board[b] && board[a]===board[c]) return combo;
      }
      return null;
    }

    function highlightWin(combo){
      combo.forEach(i => cells[i].classList.add('win'));
    }

    function reset(full=true){
      board.fill(null);
      history=[];
      gameOver=false;
      cells.forEach(c=>{c.className='cell';c.innerHTML='';});
      messageEl.textContent = 'New game — have fun!';
      if(full){current='X';turnEl.textContent=current}
    }

    resetBtn.addEventListener('click',()=>reset(true));
    undoBtn.addEventListener('click',()=>{
      if(history.length===0 || gameOver) return;
      const last = history.pop();
      board[last]=null;
      cells[last].className='cell';cells[last].innerHTML='';
      current = current === 'X' ? 'O' : 'X';
      turnEl.textContent=current;
      messageEl.textContent='Move undone.';
    });

    function updateScores(){
      scoreX.textContent = scores.X;
      scoreO.textContent = scores.O;
      scoreD.textContent = scores.D;
    }

    // --- tiny confetti ---
    const canvas = document.getElementById('confetti');
    const ctx = canvas.getContext('2d');
    let confettiPieces = [];
    function resizeCanvas(){
      canvas.width = window.innerWidth; canvas.height = window.innerHeight;
    }
    window.addEventListener('resize',resizeCanvas);

    function launchConfetti(){
      confettiPieces = [];
      const colors = ['#7ab8ff','#d1e6ff','#7ad1ff','#fff3a6'];
      for(let i=0;i<80;i++){
        confettiPieces.push({x:Math.random()*canvas.width,y:-20,vy:Math.random()*3+2,ax:Math.random()*0.06-0.03,rot:Math.random()*360,vr:Math.random()*6+2,w:6+Math.random()*10,color:colors[Math.floor(Math.random()*colors.length)],t:Math.random()*400});
      }
      requestAnimationFrame(step);
      setTimeout(()=>confettiPieces=[] , 4000);
    }

    function step(t){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      for(const p of confettiPieces){
        p.vy+=0.06; p.x+=p.ax*10; p.y+=p.vy; p.rot+=p.vr;
        ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.rot*Math.PI/180);
        ctx.fillStyle=p.color; ctx.fillRect(-p.w/2,-p.w/2,p.w,p.w*0.6);
        ctx.restore();
      }
      confettiPieces = confettiPieces.filter(p=>p.y<canvas.height+50);
      if(confettiPieces.length) requestAnimationFrame(step);
    }

    // init
    createBoard();
    updateScores();

    // accessibility: keyboard support
    boardEl.addEventListener('keydown',e=>{
      const idx = Number(document.activeElement.dataset.index);
      if(Number.isNaN(idx)) return;
      if(e.key === 'Enter' || e.key === ' ') makeMove(idx);
      if(e.key === 'ArrowRight') focusCell((idx+1)%9);
      if(e.key === 'ArrowLeft') focusCell((idx+8)%9);
      if(e.key === 'ArrowUp') focusCell((idx+6)%9);
      if(e.key === 'ArrowDown') focusCell((idx+3)%9);
    });
    function focusCell(i){ cells[i].focus(); }

  </script>
</body>
</html>
